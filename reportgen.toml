# Report Generation Configuration
# Single source of truth for all report generation commands.
# Used by: cargo xtask reportgen, CI workflow
#
# Fields:
#   name        - unique identifier (used as CLI flag: cargo prep -n <name>)
#   description - human-readable description
#   root        - project root directory
#   args        - additional CLI arguments
#   output      - output file path (default: reports/<name>-report.md)
#   env         - environment variables
#   pre_command - command to run before generation (local)
#   ci_setup    - setup command for CI (e.g., pnpm install)
#   ci_env      - environment variables for CI (overrides env)
#   ci_skip     - exclude from CI matrix (default: false)

[[reports]]
name = "playground"
description = "Contract playground (markdown)"
root = "./tests/contract-playground"
args = ["-i", "src/", "-x", "lib/"]

[[reports]]
name = "playground-json"
description = "Contract playground (json)"
root = "./tests/contract-playground"
args = ["-i", "src/", "-x", "lib/"]
output = "reports/playground-json-report.json"

[[reports]]
name = "playground-sarif"
description = "Contract playground (sarif)"
root = "./tests/contract-playground"
output = "reports/playground-sarif-report.sarif"

[[reports]]
name = "adhoc"
description = "Adhoc sol files"
root = "./tests/adhoc-sol-files"

[[reports]]
name = "sablier"
description = "Sablier (nested root with aderyn.toml)"
root = "./tests/2024-05-Sablier"
ci_setup = "pnpm install --prefix tests/2024-05-Sablier/v2-core"
ci_env = { FOUNDRY_PROFILE = "uniswap" }

[[reports]]
name = "nft"
description = "Foundry NFT"
root = "./tests/foundry-nft-f23"
args = ["-i", "src/", "-x", "lib/"]
pre_command = "cd tests/foundry-nft-f23 && forge install && cd ../.."

[[reports]]
name = "ccip"
description = "CCIP Functions"
root = "tests/ccip-contracts/contracts"
args = ["--src", "src/v0.8/functions/", "-x", "tests/,test/,mocks/"]

[[reports]]
name = "uniswap"
description = "Uniswap foundry profile"
root = "tests/contract-playground/"
env = { FOUNDRY_PROFILE = "uniswap" }

[[reports]]
name = "prb"
description = "PRB Math"
root = "tests/prb-math"
ci_setup = "pnpm install --prefix tests/prb-math/"

[[reports]]
name = "temple"
description = "Temple Gold"
root = "tests/2024-07-templegold/protocol"
ci_skip = true

[[reports]]
name = "hardhat"
description = "Hardhat JS Playground"
root = "tests/hardhat-js-playground"

[[reports]]
name = "nft-icm"
description = "Foundry NFT with ICM"
root = "tests/foundry-nft-f23-icm"

[[reports]]
name = "detector-exclude"
description = "Detector exclusion test"
root = "tests/detector-exclude"

[[reports]]
name = "detector-include"
description = "Detector inclusion test"
root = "tests/detector-include"

[[reports]]
name = "viair"
description = "Via IR compilation"
root = "tests/via-ir-enabled"

[[reports]]
name = "highs-json"
description = "JSON highs-only filter"
root = "./tests/adhoc-sol-files"
args = ["--highs-only"]
output = "reports/highs-json-report.json"

[[reports]]
name = "empty"
description = "Empty report (no matches)"
root = "tests/contract-playground"
args = ["-i", "IgnoreEverything.sol"]
